# Playwright E2E-UI-API Tests

This repository contains end-to-end (E2E) tests for UI and API functionalities using [Playwright](https://playwright.dev/). The project is structured to test UI application [Saucedemo](https://saucedemo.com/), covering User login, checkout & sorting items flow e2e, API tests using [reqres](https://reqres.in/).

## Project Structure

```
playwright-e2e-ui-api-tests/
├── .gitignore               # Git ignore file
├── package.json             # Project dependencies and scripts
├── playwright.config.ts     # Playwright configuration
├── README.md                # Project documentation
├── .github/                 # GitHub Actions workflows
│   └── workflows/
│       └── playwright.yml   # CI/CD workflow for Playwright tests
├── fixtures/                # Test data for UI and API tests
│   ├── productData.ts
│   └── testData.ts
├── helpers/                 # Utility functions for tests
│   ├── types.ts
│   ├── api.ts
│   └── ui.ts
├── playwright-report/       # Test reports generated by Playwright
├── test-results/            # Test result artifacts
├── tests/                   # Test cases
│   ├── API/                 # API test cases
│   │   └── users.spec.ts
│   └── UI/                  # UI test cases
│       ├── pages/           # Page Object Model (POM) classes
│       │   ├── BasePage.ts
│       │   ├── CartPage.ts
│       │   ├── CheckoutPage.ts
│       │   ├── LoginPage.ts
│       │   ├── ProductPage.ts
│       │   └── index.ts
│       └── UI-tests/        # End-to-end UI test cases
│           └── e2e-tests.spec.ts
```

## Prerequisites

- Node.js (LTS version recommended)
- npm
- Playwright browsers (installed automatically)
- Docker (optional)

## Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd playwright-e2e-ui-api-tests
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

## Running Tests

### Run All Tests
```bash
npm test
```

### Run UI Tests
```bash
npm run test:UI
```

### Run API Tests
```bash
npm run test:API
```

## Test Reports

- After running tests, an HTML report is generated in the `playwright-report/` directory.
- To view the report, open `playwright-report/index.html` in a browser.

## Test Strategy

The testing strategy for this project is designed to ensure comprehensive coverage of both UI and API functionalities. The tests are categorized into **positive** and **negative** scenarios to validate the application's behavior under various conditions.

### UI Tests

#### Positive Tests
- Validate the final price after checkout which contains 2 items.
- Validate sorting of item by name Z-A order.

#### Negative Tests
- Validating failed login with relevant username/password error message.

### API Tests

#### Positive Tests
- Retrieve list of users.
- Validate successful login.
- Validate updating user.
- Validate deleting user.
- Validate parameterized delayed request with max 3 seconds delay in response.

#### Negative Tests
- Attempt login with incorrect credentials should response with 400.
- Access non existent user resource returning 404.

## Assumption and AI usage

The following assumption and usage of AI:

1. **Taking 2.7 seconds**  
   - **Issue**: As api returning some delay of microseconds when we give 3 as a parameter, so we set 2.7 seconds as parameter input.  
   - **Expected Behavior**: Api returns back response in less than or equal to 3 seconds maximum.

2. **AI usage**  
   - **Usage**: GitHub Copilot was utilized to improve code readability, to generate the visual project structure outlined in the project structure section & support with improving playwright.yml file.

## CI/CD Integration

This project uses GitHub Actions for CI/CD. The workflow is defined in `.github/workflows/playwright.yml`. It runs both UI and API tests on every push or pull request to the `master` branch.

**Reports in pipeline**  
   - **UI & API**: Report can be found under the action tab and the respective job steps. 

## Key Features

### UI Tests
- Implements the Page Object Model (POM) design pattern.
- Covers end-to-end checkout , login, and item sort management flows.

### API Tests
- CRUD operations for user api.
- Negative test cases for invalid login.

### Utilities
- `helpers/ui.ts`: Utility functions for UI interactions.
- `helpers/api.ts`: Helper functions for API requests.
- `fixtures/`: Test data for both UI and API tests.

### Running Tests in Docker
- Execute the following command to build and run the tests in Docker:
  ```bash
  docker-compose up --build
- Once the tests have completed, you can view the reports under playwright-report `index.html`.
